<mxfile host="Electron" agent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/29.0.3 Chrome/140.0.7339.249 Electron/38.7.0 Safari/537.36" version="29.0.3">
  <diagram name="Bus Model" id="bus-model">
    <mxGraphModel dx="1665" dy="824" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="1" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="yaml-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;fontFamily=Courier New;fontSize=11;spacingLeft=10;spacingTop=10;" parent="1" vertex="1">
          <mxGeometry x="40" y="40" width="380" height="720" as="geometry" />
        </mxCell>
        <mxCell id="yaml-title" value="Model Bus" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="40" y="40" width="380" height="30" as="geometry" />
        </mxCell>
        <mxCell id="params-highlight" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;" parent="1" vertex="1">
          <mxGeometry x="60" y="100" width="340" height="80" as="geometry" />
        </mxCell>
        <mxCell id="vars-highlight" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;" parent="1" vertex="1">
          <mxGeometry x="60" y="190" width="340" height="120" as="geometry" />
        </mxCell>
        <mxCell id="ports-highlight" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;" parent="1" vertex="1">
          <mxGeometry x="60" y="320" width="340" height="60" as="geometry" />
        </mxCell>
        <mxCell id="constraint-highlight" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;" parent="1" vertex="1">
          <mxGeometry x="60" y="390" width="340" height="100" as="geometry" />
        </mxCell>
        <mxCell id="objective-highlight" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;" parent="1" vertex="1">
          <mxGeometry x="60" y="500" width="340" height="100" as="geometry" />
        </mxCell>
        <mxCell id="output-highlight" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;" parent="1" vertex="1">
          <mxGeometry x="60" y="610" width="340" height="70" as="geometry" />
        </mxCell>
        <mxCell id="arrow-params" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#6c8ebf;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="params-highlight" target="params-box" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="410" y="140" as="sourcePoint" />
            <mxPoint x="460" y="90" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-vars" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#82b366;" parent="1" source="vars-highlight" target="vars-box" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="410" y="250" as="sourcePoint" />
            <mxPoint x="460" y="200" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-ports" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#d79b00;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="ports-highlight" target="ports-box" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="410" y="350" as="sourcePoint" />
            <mxPoint x="460" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-constraint" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#9673a6;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="constraint-highlight" target="constraint-box" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="410" y="440" as="sourcePoint" />
            <mxPoint x="460" y="390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-objective" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#b85450;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="objective-highlight" target="objective-box" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="410" y="550" as="sourcePoint" />
            <mxPoint x="460" y="500" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-output" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#d6b656;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="output-highlight" target="output-box" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="410" y="645" as="sourcePoint" />
            <mxPoint x="460" y="595" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="params-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;" parent="1" vertex="1">
          <mxGeometry x="480" y="70" width="350" height="100" as="geometry" />
        </mxCell>
        <mxCell id="params-content" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;• \(\delta_b^-\) (spillage_cost) : Cost of spilled energy&lt;br&gt;&lt;br&gt;• \(\delta_b^+\) (unsupplied_energy_cost) : Cost of unsupplied energy (Value of Lost Load)&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
          <mxGeometry x="490" y="75" width="330" height="90" as="geometry" />
        </mxCell>
        <mxCell id="vars-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;" parent="1" vertex="1">
          <mxGeometry x="480" y="190" width="350" height="110" as="geometry" />
        </mxCell>
        <mxCell id="vars-content" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;• \(S_{b,t}\) (spillage) : Spilled power at bus&lt;br&gt;&amp;nbsp;&amp;nbsp;\(S_{b,t} \geq 0\)&lt;br&gt;&lt;br&gt;• \(U_{b,t}\) (unsupplied_energy) : Unsupplied power&lt;br&gt;&amp;nbsp;&amp;nbsp;\(U_{b,t} \geq 0\)&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
          <mxGeometry x="490" y="195" width="330" height="100" as="geometry" />
        </mxCell>
        <mxCell id="ports-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;" parent="1" vertex="1">
          <mxGeometry x="480" y="320" width="350" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ports-content" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;\(\text{balance\_port}\) : aggregates all connected flows&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
          <mxGeometry x="490" y="335" width="330" height="40" as="geometry" />
        </mxCell>
        <mxCell id="constraint-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;" parent="1" vertex="1">
          <mxGeometry x="480" y="400" width="380" height="100" as="geometry" />
        </mxCell>
        <mxCell id="constraint-content" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;b&gt;First Kirchhoff&#39;s Law (Power Balance):&lt;/b&gt;&lt;br&gt;&lt;br&gt;\(\sum_{\text{connections}} \text{flow} = S_{b,t} - U_{b,t}\)&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
          <mxGeometry x="490" y="405" width="360" height="90" as="geometry" />
        </mxCell>
        <mxCell id="objective-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;" parent="1" vertex="1">
          <mxGeometry x="480" y="520" width="380" height="100" as="geometry" />
        </mxCell>
        <mxCell id="objective-content" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;Objective contribution (penalty costs):&lt;br&gt;&lt;br&gt;\(\Omega_{\text{bus}} = \sum_{t \in T} (\delta_b^- \cdot S_{b,t} + \delta_b^+ \cdot U_{b,t})\)&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
          <mxGeometry x="490" y="525" width="360" height="90" as="geometry" />
        </mxCell>
        <mxCell id="output-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;" parent="1" vertex="1">
          <mxGeometry x="480" y="640" width="350" height="60" as="geometry" />
        </mxCell>
        <mxCell id="output-content" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;\(\text{marginal\_price} = \text{dual(balance)}\)&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
          <mxGeometry x="490" y="655" width="330" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yaml-content" value="&lt;font style=&quot;font-size: 12px;&quot;&gt;- &lt;b&gt;id:&lt;/b&gt; bus&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;&lt;br&gt;&lt;b&gt;  parameters:&lt;/b&gt;&lt;br&gt;&amp;nbsp; - id: spillage_cost&lt;br&gt;&amp;nbsp; - id: unsupplied_energy_cost&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;&lt;br&gt;&lt;b&gt;  variables:&lt;/b&gt;&lt;br&gt;&amp;nbsp; - id: spillage&lt;br&gt;&amp;nbsp; &amp;nbsp; lower-bound: 0&lt;br&gt;&amp;nbsp; &amp;nbsp; variable-type: continuous&lt;br&gt;&amp;nbsp; - id: unsupplied_energy&lt;br&gt;&amp;nbsp; &amp;nbsp; lower-bound: 0&lt;br&gt;&amp;nbsp; &amp;nbsp; variable-type: continuous&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;&lt;br&gt;&lt;b&gt;  ports:&lt;/b&gt;&lt;br&gt;&amp;nbsp; - id: balance_port&lt;br&gt;&amp;nbsp; &amp;nbsp; type: flow_port&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;&lt;br&gt;&lt;b&gt;  binding-constraints:&lt;/b&gt;&lt;br&gt;&amp;nbsp; - id: balance&lt;br&gt;&amp;nbsp; &amp;nbsp; expression:&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; sum_connections(balance_port.flow)&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; = spillage - unsupplied_energy&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;&lt;br&gt;&lt;b&gt;  objective-contributions:&lt;/b&gt;&lt;br&gt;&amp;nbsp; - id: objective&lt;br&gt;&amp;nbsp; &amp;nbsp; expression:&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; sum(spillage * spillage_cost&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; + unsupplied_energy&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; * unsupplied_energy_cost)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;&lt;br&gt;&lt;b&gt;  extra-outputs:&lt;/b&gt;&lt;br&gt;&amp;nbsp; - id: marginal_price&lt;br&gt;&amp;nbsp; &amp;nbsp; expression: dual(balance)&lt;/font&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontFamily=Courier New;fontSize=10;spacingLeft=15;spacingTop=5;" parent="1" vertex="1">
          <mxGeometry x="50" y="70" width="360" height="640" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
