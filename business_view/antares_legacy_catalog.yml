# Such a file for "Business Metrics" definitions should be modified only by expert user in a text editor. No API/GUI is needed.
# In "secure mode", a user can only refer to "Business Metrics Definition files" that are registered as "safe" in a reference repo.
# In "free mode", a user can refer to "Business Metrics Definitions files" that are freely modified

############################    Columns of a Business View   #######################################

# metric_id | metric_location | breakdown_property | view_date | scenario_id | metric_value |

####################################################################################################

catalog:
  
  id: antares_area_output

  taxonomy: my_taxonomy

  location:
    taxonomy-group: area # str | tuple(str)
    #The category of models in the taxonomy that will serve as "location-ports" for these metrics
    #balance is the taxonomy group for area, zones... etc

  metrics-definition: 

  - id: OV.COST
    terms:
      - taxonomy-group: area
        output-id: ens_and_spillage_cost
        location-ports: null 
      - taxonomy-group: production
        output-id: proportional_cost
        location-ports: balance_port
      - taxonomy-group: production
        output-id: non_proportional_cost
        location-ports: balance_port
    terms-operator: sum
    time-operator: sum


  - id: OP.COST
    terms:
      - taxonomy-group: production
        output-id: proportional_cost
        location-ports: balance_port
      - taxonomy-group: production
        output-id: non_proportional_cost
        location-ports: balance_port
    terms-operator: sum
    time-operator: sum

  - id: MRG.PRICE
    terms:
      - taxonomy-group: area
        output-id: marginal_price
        location-ports: null
    terms-operator: sum
    time-operator: sum


  - id: LOAD
    terms:
      - taxonomy-group: consumption
        output-id: balance_port.flow
        location-ports: balance_port
    terms-operator: sum
    time-operator: sum

  - id: DTG_BY_TECHNOLOGY
    terms:
      - taxonomy-group: production
        output-id: balance_port.flow
        location-ports: balance_port
    terms-operator: sum
    breakdown:
      - key: technology
    time-operator: sum

  - id: BALANCE
    terms:
      - taxonomy-group: exchange
        output-id: balance_port.flow
        location-ports: balance_port
    terms-operator: sum
    time-operator: sum